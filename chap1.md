# 1. UNIX 시스템의 개요

## 1.2 UNIX 기반구조
운영체제는 컴퓨터의 하드웨어 자원들을 제어하는, 그리고 프로그램이 실행될 수 있는 환경을 제공하는 소프트웨어라고 정의할 수 있다. </br>
이것을 커널(kernel)이라고 부르는데, 이는 커널이 비교적 크기가 작으며 실행 환경의 핵심부에 놓여 있기 때문이다. 

커널에 대한 인터페이스는 시스템 호출이라고 부르는 소프트웨어 계층이다. 공통 함수 라이브러리들은 이러한 시스템 호출 인터페이스를 기반으로 삼아 구축된다. </br>
응용 프로그램이 시스템 호출들을 사용하는 것도 가능하다. 셸은 다른 프로그램의 실행을 위한 인터페이스를 제공하는 특별한 응용 프로그램이다. </br>
넓은 의미의 운영체제에는 커널뿐만 아니라 컴퓨터를 유용하게 하며 컴퓨터에 개성을 부여하는 다른 모든 소프트웨어도 포함된다. </br>
'다른 모든 소프트웨어'로는 시스템 유틸리티, 응용 프로그램, 셸, 공통 함수 라이브러리 등이 있다.

## 1.3 로그인

### 로그인 이름
유닉스 시스템에 로그인할 때에는 로그인 이름을 입력한 후 패스워드를 입력한다. </br>
시스템은 입력된 로그인 이름을 자신의 패스워드 파일에서 찾아보는데, 그 패스워드 파일은 보통 /etc/password이다. </br>
패스워드 파일을 실제로 보면 하나의 행이 콜론(:)으로 구분된 필드 일곱개로 구성되어 있다. </br>
일곱 필드는 순서대로 로그인 이름, 암호화된 패스워드, 사용자 ID를 뜻하는 정수(205), 그룹 ID를 뜻하는 정수, 주석 필드, 홈 디렉터리(/home/sar), 셸 프로그램(/bin/ksh)이다.

sar:x:205:105:Stephen Rago:/home/sar:/bin/ksh

### 셸
로그인이 성공하면 일반적으로 약간의 시스템 정보가 화면에 나타나고 셸 프로그램에 명령을 입력할 수 있게 된다. </br>
셸은 사용자 입력을 읽어서 명령을 실행하는 명령줄 해석기이다. 셸에 대한 사용자 입력은 보통 터미널을 통해서 주어지지만, 파일(셸 스크립트)에서 주어지는 경우도 있다. </br>
시스템은 패스워드 파일의 현재 사용자에 대한 행의 마지막 필드에 근거해서 혀재 사용자를 위해 실행할 셸을 결정한다. 

## 1.4 파일과 디렉터리

### 파일 시스템
UNIX의 파일 시스템은 디렉터리들과 파일들을 계통적으로 조직화한 것이다. 파일 시스템의 모든 것은 루트(root)라고 부르는 디렉터리에서 시작한다. 루트 디렉터리의 이름은 한 문자짜리 /이다. </br>
디렉터리는 디렉터리 항목들을 담은 파일이다. 논리적으로 하나의 디렉터리 항목은 파일 이름과 함께 파일의 특성들을 서술하는 정보 구조체를 담고 있는 어떤 것이라고 생각하면 된다. </br>
파일의 특성들로는 파일의 종류, 파일의 크기, 파일의 소유자, 파일에 대한 접근 권한, 파일이 마지막으로 수정된 일시 등이 있다. </br>
stat 함수와 fstat 함수는 한 파일의 모든 특성을 담은 정보 구조체를 돌려준다. 

### 파일 이름
한 디렉터리 안의 이름을 파일이름이라고 부른다. 파일이름에 사용할 수 없는 문자는 단 두개로, 바로 슬래시 문자(/)와 널 문자이다. </br>
슬래시는 하나의 경로 이름을 구성하는 파일이름들을 구분하는 역할을 하고, 널 문자는 하나의 경로이름의 끝을 표시한다. </br>
파일이름에는 보통의 인쇄 가능한 문자들만 사용하는 것이 바람직하다. POSIX.1은 파일이름에 사용할 수 있는 문자를 영문자(a-z, A-Z), 숫자(0-9), 마침표(.), 대시(-), 밑줄(_)로만 제한한다. </br>
새 디렉터리를 만들면 자동으로 생성되는 파일이름 두개가 있는데, 도트(.)와 도트-도트(..)이다. 현재 디렉터리는 ., 부모 디렉토리는 ..이다. 루트 디렉터리에서는 도트-도트가 도트와 같다.

### 경로 이름
하나 이상의 파일이름들이 슬래시로 연결된 형태이다. 경로이름의 첫 글자가 슬래시일 수도 있다. 슬래시로 시작하는 경로이름을 절대 경로이름이라고 부르고 그렇지 않은 경로이름을 상대 경로이름이라고 부른다. </br>
상대 경로이름은 현재 디렉터리에 상대적인 파일을 지칭한다. 한 파일 시스템의 루트 디렉터리를 뜻하는 이름(/)은 파일이름이 전혀 없다는 점에서 특별한 경우에 해당하는 절대 경로이름이다.

### 작업 디렉터리
모든 프로세스에는 작업 디렉터리가 있는데, 이를 현재 작업 디렉터리라고 부른다. </br>
작업 디렉터리는 모든 상대 경로이름이 해석되는 기준으로 쓰이고, 프로세스는 chdir 함수를 이용해서 자신의 작업 디렉터리를 변경할 수 있다.

### 홈 디렉터리
사용자가 로그인 하면 작업 디렉터리는 사용자의 홈 디렉터리로 설정된다. 홈 디렉터리의 구체적인 경로 이름은 패스워드 파일 중 현재 사용자의 항목에 들어있다.

## 1.5 입력과 출력

### 파일 서술자
파일 서술자는 커널이 한 프로세스가 접근하는 파일들을 식별하기 위해 사용하는 것으로 음이 아닌 작은 정수 값이다. </br>
프로세스가 기존 파일을 열거나 새 파일을 생성하면 커널은 그 파일을 읽거나 쓸 때 사용할 파일 서술자를 돌려준다.

### 표준 입력, 표준 출력, 표준 오류
관례상 모든 셸은 프로그램이 새로 실행될 때마다 세개의 파일 서술자를 연다. 바로 표준 입력, 표준 출력, 표준 오류이다.

### 버퍼링 없는 입출력
open, read, write, lseek, close 함수는 버퍼링 없는 입출력 기능을 제공한다. 이 함수들은 모두 파일 서술자에 대해 작동한다.

### 표준 입출력
표준 입출력 함수들은 버퍼링 없는 입출력 함수들에 대한 버퍼링 있는 인터페이스를 제공한다. 이것들을 이용하면 프로그래머가 최적의 버퍼 크기를 선택해야 하는 부담이 사라진다. </br>
또, 입력을 줄 단위로 처리하는 작업이 간단해진다. </br>
fgets 함수는 하나의 줄 전체를 읽어 들인다. read 함수는 바이트들을 지정된 개수만큼만 읽어 들인다. 가장 많이 사용하는 표준 입출력 함수는 printf이다. printf를 호출하는 프로그램에서는 항상 <stdio.h> 헤더를 포함시키는데 표준 입출력 함수의 원형이 포함되어 있기 때문이다.

## 1.6 프로그램과 프로세스
프로그램은 디스크의 디렉터리에 있는 실행 파일이다. 프로그램의 실행은 일곱 가지 exec 함수 중 하나의 호출에 의해 시작딘다. 그러면 커널은 디스크의 프로그램을 메모리로 읽어 들여서 실행한다. 
